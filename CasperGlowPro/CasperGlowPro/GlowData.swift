//
//  GlowData.swift
//  CasperGlowPro
//
//  Created by Jeffrey Deng on 2021-02-15.
//

import Foundation
import CoreBluetooth

struct GlowData {
    static let SERVICE_UUID = CBUUID(string: "9BB30001-FEE9-4C24-8361-443B5B7C88F6")
    
    struct Read {
        static let READY_BYTES = Data([
            0x08, 0xF7, 0x83, 0xD0, 0xA8, 0x02, 0x10, 0x01, 0x18, 0xFD, 0xB0, 0x8B, 0xCD, 0x0C, 0x22, 0x04, 0x72, 0x02, 0x08, 0x00
        ])
    }
    
    enum WriteType {
        case connect
        case reconnect
        case connectAck
        case turnOffLight
        case turnOnLight
        case timeUpdate // Not sure if it is actually sending time, but this packet changes as time goes
        case ping1 // Not sure what Pings are, but they are sent periodically
        case ping2
        
        var data: Data {
            switch self {
            case .reconnect:
                // 0801 2202 6A00
                return Data([
                    0x08, 0x01, 0x22, 0x02, 0x6A, 0x00
                ])
            case .connect:
                // 0801 2202 6200
                return Data([
                    0x08, 0x01, 0x22, 0x02, 0x62, 0x00
                ])
            case .connectAck:
                //0801 10F7 83D0 A802 2214 4212 0A10 39EF 10F6 655E 49BE 8C22 3B1A EB65 473A
                return Data([
                    0x08, 0x01, 0x10, 0xF7, 0x83, 0xD0, 0xA8, 0x02, 0x22, 0x14, 0x42, 0x12,
                    0x0A, 0x10, 0x39, 0xEF,
                    0x10, 0xF6, 0x65, 0x5E,
                    0x49, 0xBE, 0x8C, 0x22,
                    0x3B, 0x1A, 0xEB, 0x65,
                    0x47, 0x3A
                ])
            case .turnOffLight:
                return Data([
                    0x08, 0x01, 0x10, 0xF7, 0x83, 0xD0, 0xA8, 0x02, 0x22,
                    0x04, 0x1A, 0x02, 0x08, 0x04
                ])
            case .turnOnLight:
                return Data([
                    0x08, 0x01, 0x10, 0xF7, 0x83, 0xD0, 0xA8, 0x02, 0x22,
                    0x04, 0x1A, 0x02, 0x08, 0x02
                ])
            case .timeUpdate:
                return Data([
                    0x08, 0x01, 0x10, 0xF7, 0x83, 0xD0, 0xA8, 0x02, 0x22,
                    0x17, 0xAA, 0x01, 0x14, 0x08, 0xB9, 0xA1, 0x8D, 0x81,
                    0x06, 0x10, 0x9F, 0x99, 0x02, 0x18, 0xF0, 0xE8, 0xB6,
                    0x82, 0x06, 0x20, 0xFF, 0xE0, 0x01
                ])
            case .ping1:
                return Data([
                    0x08, 0x01, 0x10, 0xF7, 0x83, 0xD0, 0xA8, 0x02, 0x22,
                    0x28, 0x2A, 0x26, 0x08, 0xE4, 0x80, 0x0A, 0x12, 0x1E,
                    0x08, 0x01, 0x10, 0x07, 0x18, 0x00, 0x20, 0xC3, 0x04,
                    0x32, 0x13, 0x01, 0x02, 0x03, 0x04, 0x05, 0x06, 0x07,
                    0x08, 0x09, 0x00, 0x01, 0x01, 0x03, 0x04, 0x05, 0x06,
                    0x07, 0x08, 0x09, 0x18, 0x78
                ])
            case .ping2:
                return Data([
                    0x08, 0x01, 0x10, 0xF7, 0x83, 0xD0, 0xA8, 0x02 , 0x22,
                    0x04, 0x52, 0x02 , 0x08, 0x03
                ])
            }
        }
    }
}
